#include "../../include/IKSolver.hpp"

IKSolver::IKSolver(params_t params)
  : params(params)
{
  this->message.initialized();
}
/*******************************************************************************
 ******************************************************************************/
void IKSolver::solve(params_t parameters)
{
  this->params = parameters;
}
/*******************************************************************************
 ******************************************************************************/
bool IKSolver::_hasLegsOffGround(void)
{
  uint8_t idx;
  for (idx = 0; idx < 6; idx++){
    if (this->legPositionsOffGround[idx] == true){return true;}
  }
  return false;
}
/*******************************************************************************
 ******************************************************************************/
bool IKSolver::_hasNoMoreSupport(bool legPositionsOffGround[6])
{
  SupportCheck_reason_t reason;

  for (uint8_t idx = 0; idx < 6; idx++){
    this->legPositionsOffGround[idx] = legPositionsOffGround[idx];
  }

  HexapodSupportCheck::checkSupport(&(this->legPositionsOffGround[6]), &reason);

}
/*******************************************************************************
 ******************************************************************************/

/*******************************************************************************
 ******************************************************************************/


/*******************************************************************************
 ******************************************************************************/


/*******************************************************************************
 ******************************************************************************/


/*******************************************************************************
 ******************************************************************************/
void IKSolver::_finalizeFailure(IKMessage message)
{
  
}
/*******************************************************************************
 ******************************************************************************/
void IKSolver::_finalizeSuccess(void)
{
  this->pose = this->partialPose;
  this->foundSolution = true;
  if (!this->_hasLegsOffGround()){
    this->message.success();
    return;
  }
  this->message.successLegsOnAir();
}